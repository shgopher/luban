<!--
 * @Author: shgopher shgopher@gmail.com
 * @Date: 2024-12-07 14:30:59
 * @LastEditors: shgopher shgopher@gmail.com
 * @LastEditTime: 2024-12-17 17:18:20
 * @FilePath: /luban/系统设计基础/架构安全性/架构安全性/保密/README.md
 * @Description: 
 * 
 * Copyright (c) 2024 by shgopher, All Rights Reserved. 
-->
# 保密

- 保密的强度
- 客户端加密
- 密码的存储和验证

根据加密的位置来划分，加密和解密分为客户端保密，传输保密，服务端保密
## 保密强度
保密是有成本的，保密的等级越高花费的工作量和资源就越多，所以在设置加解密的时候还是要充分考虑信息的重要程度将保密分级。

- 摘要替代明文，也就是说我们保存的不是经过哈希加密后的密码，而是保留该哈希值的摘要，即使密码泄露了，也不会影响其它系统的使用，不过它无法防止弱密码被彩虹表攻击
- 给密码先加上盐 (一个随机字符串) 然后再获取该字符串的哈希值，这种方法可以防止彩虹表的攻击，但是不能阻止加密结果被窃取之后，攻击者直接发送该加密后的结果给服务器进行冒领的行为。
- 将盐值作为动态值，这样就可以有效的防止冒领的行为，每次向服务器传递的加密后的值都不一样。
- 给服务加上**动态**的令牌，在网关或者其他的流量公共位置建立校验逻辑，可以防止重放攻击，每次请求的时候都携带一个令牌，服务端根据令牌来判断是否是同一个用户，如果用户没有登录，就返回错误，不过这样还是不能防止在传输过程中的数据被嗅探的泄露信息的问题。
- 启用 https 来防止恶意的嗅探，也能在通信协议的层面解决重放攻击的行为，不过，也会出现有些客户端被攻击产生伪造的根证书的问题，也有服务器被攻破产生的证书泄露问题，tls 协议加密不足产生的风险问题
- 使用独立于客户端的存储证书的加密物理设置 (比如银行的 u 盾)，大型网站设计到金钱的时候会使用双重验证的方式 (比如二次验证密码，接收手机验证码等方法)，最强的保密措施，建立一个内网，隔绝一切的对外开放的接口 (比如军队的内网)

通常这些手段中
- 使用 https 是最常见也最管用的首选方法，
- 其次就是使用动态令牌，这个令牌是服务器分发给客户端，客户端请求的时候，服务器就可以去甄别是否是自己信任的客户端，
- 最基础的密码 + 盐值加密，取哈希摘要应该是**最低的加密手段**，不能比这个更低了。
## 客户端加密

## 密码的存储和验证