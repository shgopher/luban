<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>鲁班 - 系统设计大全</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="shortcut icon" type="image/x-icon" href="/luban/favicon.ico">
    <meta name="description" content="一本关于系统设计基础，容器，rpc，任务编排，网关的书">
    
    <link rel="preload" href="/luban/assets/css/0.styles.0da71f4d.css" as="style"><link rel="preload" href="/luban/assets/js/app.564f1dfb.js" as="script"><link rel="preload" href="/luban/assets/js/2.1ab40292.js" as="script"><link rel="preload" href="/luban/assets/js/100.2ed1eb2a.js" as="script"><link rel="prefetch" href="/luban/assets/js/10.f6f18693.js"><link rel="prefetch" href="/luban/assets/js/101.94822432.js"><link rel="prefetch" href="/luban/assets/js/102.1820cdcc.js"><link rel="prefetch" href="/luban/assets/js/103.6477134c.js"><link rel="prefetch" href="/luban/assets/js/104.6e0fd34d.js"><link rel="prefetch" href="/luban/assets/js/105.557b9e57.js"><link rel="prefetch" href="/luban/assets/js/106.0eee9bb3.js"><link rel="prefetch" href="/luban/assets/js/107.0df57ecc.js"><link rel="prefetch" href="/luban/assets/js/108.83422b19.js"><link rel="prefetch" href="/luban/assets/js/109.fcc1f5a3.js"><link rel="prefetch" href="/luban/assets/js/11.986d579c.js"><link rel="prefetch" href="/luban/assets/js/110.bf9ee037.js"><link rel="prefetch" href="/luban/assets/js/111.cb425c74.js"><link rel="prefetch" href="/luban/assets/js/112.240dfbd6.js"><link rel="prefetch" href="/luban/assets/js/113.622bbcca.js"><link rel="prefetch" href="/luban/assets/js/114.3757e046.js"><link rel="prefetch" href="/luban/assets/js/115.76fc2416.js"><link rel="prefetch" href="/luban/assets/js/116.fe91cd93.js"><link rel="prefetch" href="/luban/assets/js/117.57d79c60.js"><link rel="prefetch" href="/luban/assets/js/118.5c1832ea.js"><link rel="prefetch" href="/luban/assets/js/119.80d6af20.js"><link rel="prefetch" href="/luban/assets/js/12.3baa4d7d.js"><link rel="prefetch" href="/luban/assets/js/120.fd469b78.js"><link rel="prefetch" href="/luban/assets/js/121.d01b48fd.js"><link rel="prefetch" href="/luban/assets/js/122.303607ac.js"><link rel="prefetch" href="/luban/assets/js/123.8204c073.js"><link rel="prefetch" href="/luban/assets/js/124.4ce9e45a.js"><link rel="prefetch" href="/luban/assets/js/13.790d5478.js"><link rel="prefetch" href="/luban/assets/js/14.a6eea412.js"><link rel="prefetch" href="/luban/assets/js/15.5c1c3a0f.js"><link rel="prefetch" href="/luban/assets/js/16.b979e77e.js"><link rel="prefetch" href="/luban/assets/js/17.58f31afc.js"><link rel="prefetch" href="/luban/assets/js/18.45632543.js"><link rel="prefetch" href="/luban/assets/js/19.152ab4db.js"><link rel="prefetch" href="/luban/assets/js/20.225b0e5c.js"><link rel="prefetch" href="/luban/assets/js/21.726e1af8.js"><link rel="prefetch" href="/luban/assets/js/22.0303d452.js"><link rel="prefetch" href="/luban/assets/js/23.17fb887c.js"><link rel="prefetch" href="/luban/assets/js/24.b056f910.js"><link rel="prefetch" href="/luban/assets/js/25.f393a0da.js"><link rel="prefetch" href="/luban/assets/js/26.1aaa6499.js"><link rel="prefetch" href="/luban/assets/js/27.b1fde918.js"><link rel="prefetch" href="/luban/assets/js/28.e7b3e2bb.js"><link rel="prefetch" href="/luban/assets/js/29.e0f8926c.js"><link rel="prefetch" href="/luban/assets/js/3.5521afc8.js"><link rel="prefetch" href="/luban/assets/js/30.dc61385b.js"><link rel="prefetch" href="/luban/assets/js/31.c8bcea60.js"><link rel="prefetch" href="/luban/assets/js/32.7cd7a706.js"><link rel="prefetch" href="/luban/assets/js/33.86880c33.js"><link rel="prefetch" href="/luban/assets/js/34.cc406e65.js"><link rel="prefetch" href="/luban/assets/js/35.e2850063.js"><link rel="prefetch" href="/luban/assets/js/36.b05d2235.js"><link rel="prefetch" href="/luban/assets/js/37.618e13c7.js"><link rel="prefetch" href="/luban/assets/js/38.0da2a53a.js"><link rel="prefetch" href="/luban/assets/js/39.2689a5a9.js"><link rel="prefetch" href="/luban/assets/js/4.24aaae80.js"><link rel="prefetch" href="/luban/assets/js/40.aa04270c.js"><link rel="prefetch" href="/luban/assets/js/41.32bd08fe.js"><link rel="prefetch" href="/luban/assets/js/42.96d2281a.js"><link rel="prefetch" href="/luban/assets/js/43.a7db219b.js"><link rel="prefetch" href="/luban/assets/js/44.b5a0e1b9.js"><link rel="prefetch" href="/luban/assets/js/45.f481728f.js"><link rel="prefetch" href="/luban/assets/js/46.2eb47929.js"><link rel="prefetch" href="/luban/assets/js/47.a29969e4.js"><link rel="prefetch" href="/luban/assets/js/48.23edcab1.js"><link rel="prefetch" href="/luban/assets/js/49.ce927844.js"><link rel="prefetch" href="/luban/assets/js/5.f13ad9e2.js"><link rel="prefetch" href="/luban/assets/js/50.d9533583.js"><link rel="prefetch" href="/luban/assets/js/51.5e1c7012.js"><link rel="prefetch" href="/luban/assets/js/52.e03b60a4.js"><link rel="prefetch" href="/luban/assets/js/53.d8a5a656.js"><link rel="prefetch" href="/luban/assets/js/54.8437fc28.js"><link rel="prefetch" href="/luban/assets/js/55.0f7c7872.js"><link rel="prefetch" href="/luban/assets/js/56.2bd40f4c.js"><link rel="prefetch" href="/luban/assets/js/57.ef24f6a9.js"><link rel="prefetch" href="/luban/assets/js/58.69cd05ac.js"><link rel="prefetch" href="/luban/assets/js/59.9f48fe83.js"><link rel="prefetch" href="/luban/assets/js/6.b04d00c8.js"><link rel="prefetch" href="/luban/assets/js/60.304dc822.js"><link rel="prefetch" href="/luban/assets/js/61.98636fd1.js"><link rel="prefetch" href="/luban/assets/js/62.ab678a05.js"><link rel="prefetch" href="/luban/assets/js/63.0df67178.js"><link rel="prefetch" href="/luban/assets/js/64.5a439683.js"><link rel="prefetch" href="/luban/assets/js/65.5c3d3ca1.js"><link rel="prefetch" href="/luban/assets/js/66.52523e0f.js"><link rel="prefetch" href="/luban/assets/js/67.12104e80.js"><link rel="prefetch" href="/luban/assets/js/68.88b9d748.js"><link rel="prefetch" href="/luban/assets/js/69.91f3f1ba.js"><link rel="prefetch" href="/luban/assets/js/7.0102df6d.js"><link rel="prefetch" href="/luban/assets/js/70.f30ec482.js"><link rel="prefetch" href="/luban/assets/js/71.2adcf2aa.js"><link rel="prefetch" href="/luban/assets/js/72.e4fd4053.js"><link rel="prefetch" href="/luban/assets/js/73.dfbbb2c8.js"><link rel="prefetch" href="/luban/assets/js/74.f72126fa.js"><link rel="prefetch" href="/luban/assets/js/75.e5b16b78.js"><link rel="prefetch" href="/luban/assets/js/76.1ce8b107.js"><link rel="prefetch" href="/luban/assets/js/77.3dcb9c7a.js"><link rel="prefetch" href="/luban/assets/js/78.94694b0b.js"><link rel="prefetch" href="/luban/assets/js/79.87a04231.js"><link rel="prefetch" href="/luban/assets/js/8.9d478846.js"><link rel="prefetch" href="/luban/assets/js/80.42ccbc9e.js"><link rel="prefetch" href="/luban/assets/js/81.06f5122e.js"><link rel="prefetch" href="/luban/assets/js/82.755863ba.js"><link rel="prefetch" href="/luban/assets/js/83.0b38e0c5.js"><link rel="prefetch" href="/luban/assets/js/84.9a1ac7ff.js"><link rel="prefetch" href="/luban/assets/js/85.548b8f9c.js"><link rel="prefetch" href="/luban/assets/js/86.c8114be9.js"><link rel="prefetch" href="/luban/assets/js/87.cb9f344c.js"><link rel="prefetch" href="/luban/assets/js/88.f6ac3fea.js"><link rel="prefetch" href="/luban/assets/js/89.4e86a321.js"><link rel="prefetch" href="/luban/assets/js/9.196d58b4.js"><link rel="prefetch" href="/luban/assets/js/90.cf6c7f4c.js"><link rel="prefetch" href="/luban/assets/js/91.c21c4f90.js"><link rel="prefetch" href="/luban/assets/js/92.e368888a.js"><link rel="prefetch" href="/luban/assets/js/93.a85d405f.js"><link rel="prefetch" href="/luban/assets/js/94.dfbece92.js"><link rel="prefetch" href="/luban/assets/js/95.58fdf774.js"><link rel="prefetch" href="/luban/assets/js/96.bad5405e.js"><link rel="prefetch" href="/luban/assets/js/97.38a2f2f5.js"><link rel="prefetch" href="/luban/assets/js/98.a6314a38.js"><link rel="prefetch" href="/luban/assets/js/99.7c1dd0e6.js">
    <link rel="stylesheet" href="/luban/assets/css/0.styles.0da71f4d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/luban/" class="home-link router-link-active"><img src="https://avatars.githubusercontent.com/u/42873232" alt="鲁班 - 系统设计大全" class="logo"> <span class="site-name can-hide">鲁班 - 系统设计大全</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/luban/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Menu" class="dropdown-title"><span class="title">系列教程</span> <span class="arrow down"></span></button> <button type="button" aria-label="Menu" class="mobile-dropdown-title"><span class="title">系列教程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://shgopher.github.io/GOFamily/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GOFamily 【go语言教程】
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://shgopher.github.io/408/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  408  【基础408知识教程】
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://shgopher.github.io/luban/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  luban  【系统设计教程】
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://shgopher.github.io/dingdang/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  dingdang  【工具教程】
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://shgopher.github.io/god/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  god  【给程序员写的书】
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="/luban/#wechat.png" class="nav-link">
  微信公众号
</a></div><div class="nav-item"><a href="https://shgopher.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  作者
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/shgopher/luban" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/luban/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Menu" class="dropdown-title"><span class="title">系列教程</span> <span class="arrow down"></span></button> <button type="button" aria-label="Menu" class="mobile-dropdown-title"><span class="title">系列教程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://shgopher.github.io/GOFamily/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GOFamily 【go语言教程】
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://shgopher.github.io/408/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  408  【基础408知识教程】
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://shgopher.github.io/luban/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  luban  【系统设计教程】
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://shgopher.github.io/dingdang/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  dingdang  【工具教程】
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://shgopher.github.io/god/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  god  【给程序员写的书】
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="/luban/#wechat.png" class="nav-link">
  微信公众号
</a></div><div class="nav-item"><a href="https://shgopher.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  作者
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/shgopher/luban" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span></span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/luban/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E5%9F%BA%E7%A1%80/%E6%9E%B6%E6%9E%84%E5%AE%89%E5%85%A8%E6%80%A7/%E6%9E%B6%E6%9E%84%E5%AE%89%E5%85%A8%E6%80%A7/%E9%AA%8C%E8%AF%81/#独立验证层的适用场景" class="sidebar-link">独立验证层的适用场景</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/luban/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E5%9F%BA%E7%A1%80/%E6%9E%B6%E6%9E%84%E5%AE%89%E5%85%A8%E6%80%A7/%E6%9E%B6%E6%9E%84%E5%AE%89%E5%85%A8%E6%80%A7/%E9%AA%8C%E8%AF%81/#工程化实践" class="sidebar-link">工程化实践</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/luban/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E5%9F%BA%E7%A1%80/%E6%9E%B6%E6%9E%84%E5%AE%89%E5%85%A8%E6%80%A7/%E6%9E%B6%E6%9E%84%E5%AE%89%E5%85%A8%E6%80%A7/%E9%AA%8C%E8%AF%81/#性能与安全考虑" class="sidebar-link">性能与安全考虑</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/luban/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E5%9F%BA%E7%A1%80/%E6%9E%B6%E6%9E%84%E5%AE%89%E5%85%A8%E6%80%A7/%E6%9E%B6%E6%9E%84%E5%AE%89%E5%85%A8%E6%80%A7/%E9%AA%8C%E8%AF%81/#演进是架构策略" class="sidebar-link">演进是架构策略</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/luban/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E5%9F%BA%E7%A1%80/%E6%9E%B6%E6%9E%84%E5%AE%89%E5%85%A8%E6%80%A7/%E6%9E%B6%E6%9E%84%E5%AE%89%E5%85%A8%E6%80%A7/%E9%AA%8C%E8%AF%81/#反模式" class="sidebar-link">反模式</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/luban/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E5%9F%BA%E7%A1%80/%E6%9E%B6%E6%9E%84%E5%AE%89%E5%85%A8%E6%80%A7/%E6%9E%B6%E6%9E%84%E5%AE%89%E5%85%A8%E6%80%A7/%E9%AA%8C%E8%AF%81/#总结" class="sidebar-link">总结</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/luban/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E5%9F%BA%E7%A1%80/%E6%9E%B6%E6%9E%84%E5%AE%89%E5%85%A8%E6%80%A7/%E6%9E%B6%E6%9E%84%E5%AE%89%E5%85%A8%E6%80%A7/%E9%AA%8C%E8%AF%81/#controller-service-repository-和-api-gateway-domain-dao-之间的区别" class="sidebar-link">controller -  service - repository 和 API Gateway - domain - dao 之间的区别</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/luban/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E5%9F%BA%E7%A1%80/%E6%9E%B6%E6%9E%84%E5%AE%89%E5%85%A8%E6%80%A7/%E6%9E%B6%E6%9E%84%E5%AE%89%E5%85%A8%E6%80%A7/%E9%AA%8C%E8%AF%81/#对比两种架构的差异性" class="sidebar-link">对比两种架构的差异性</a></li></ul></li><li><a href="/luban/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E5%9F%BA%E7%A1%80/%E6%9E%B6%E6%9E%84%E5%AE%89%E5%85%A8%E6%80%A7/%E6%9E%B6%E6%9E%84%E5%AE%89%E5%85%A8%E6%80%A7/%E9%AA%8C%E8%AF%81/#mvc-架构也不非要出现-html-这种前端的东西出现在-controller-中" class="sidebar-link">mvc 架构也不非要出现 HTML 这种前端的东西出现在 controller 中</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="验证">验证</h1> <p>对于每一个提交到服务中的数据，都进行验证，验证通过后，才允许提交到服务中。从数量上来说，验证做的不完善是最大的安全隐患。</p> <blockquote><p>拖库攻击：利用系统漏洞绕过验证等保护机制，连接到数据库，将数据库的数据全部下载的攻击手段。</p></blockquote> <p>缺失校验会影响数据质量，但过度校验并不会使系统更加健硕。</p> <p>比如最近出的数据问题，例如邮箱的格式，姓名长度，密码的复杂程度，都应该在前端进行验证，当然后端也是需要校验的，这是为了避免黑客的攻击，那么问题来了，后端的校验应该放在哪一层呢？</p> <p>一、分层验证的必要性
数据验证不应局限于单一层级，而应根据验证类型分层实施：</p> <ul><li><p>接入层 (Controller/API Gateway)</p> <ul><li><p>职责：基础格式校验 (非空、正则、类型)</p></li> <li><p>技术实现：利用框架注解 (如 Spring Validation) 校验 DTO</p></li> <li><p>价值：拦截明显无效请求，降低后续处理开销</p></li></ul></li> <li><p>业务逻辑层 (Service/Domain)</p> <ul><li><p>职责：复杂业务规则校验 (状态流转、业务约束)</p></li> <li><p>示例：订单支付前校验库存、用户权限、优惠券有效期</p></li> <li><p>实现：领域服务或领域对象内部方法</p></li></ul></li> <li><p>持久层 (Repository/DAO)</p> <ul><li><p>职责：最终一致性校验 (唯一性、外键约束)</p></li> <li><p>实现：数据库约束 (UNIQUE、FOREIGN KEY) 配合乐观锁</p></li></ul></li></ul> <h2 id="独立验证层的适用场景">独立验证层的适用场景</h2> <p>是否需要独立验证模块需评估以下维度：</p> <ul><li><p>建议独立的情况</p> <ul><li><p>多入口共用规则 (HTTP API + 消息队列 + RPC)</p></li> <li><p>复杂校验逻辑存在多场景复用需求</p></li> <li><p>需要统一管理校验规则元数据</p></li> <li><p>企业级合规要求 (如金融行业风控规则集中管理)</p></li></ul></li> <li><p>无需独立的情况</p> <ul><li><p>简单 CRUD 应用</p></li> <li><p>校验逻辑高度业务定制化</p></li> <li><p>团队规模较小且迭代快速</p></li></ul></li></ul> <h2 id="工程化实践">工程化实践</h2> <ol><li>校验框架选型</li></ol> <ul><li><p>基础校验：Hibernate Validator + JSR380</p></li> <li><p>复杂规则：Drools (规则引擎) 或自定义 DSL</p></li> <li><p>异步校验：Validated (响应式编程支持)</p></li> <li><p>校验规则管理</p></li></ul> <ol start="2"><li><p>校验元数据</p></li> <li><p>防御性编程</p></li></ol> <ul><li>输入预处理：参数标准化，去除空格，转换大小写等</li> <li>校验短路机制：按照校验成本排序，先校验成本低的规则</li> <li>错误信息分级，格式错误与业务错误分开</li></ul> <h2 id="性能与安全考虑">性能与安全考虑</h2> <ul><li><p>校验性能优化</p> <ul><li><p>正则表达式预编译</p></li> <li><p>高频校验结果缓存</p></li> <li><p>并行校验 (对独立校验项)</p></li></ul></li> <li><p>安全增强措施</p> <ul><li><p>深度校验：防御嵌套对象攻击</p></li> <li><p>大小限制：防范 DoS 攻击 (如超大 JSON 解析)</p></li> <li><p>敏感字段过滤：在 DTO 层进行输出过滤</p></li></ul></li></ul> <h2 id="演进是架构策略">演进是架构策略</h2> <ul><li>初期：集中校验，controller 层/API Gateway 层校验</li> <li>业务复杂化：领域模型內聚校验 + 独立校验模块</li> <li>平台化：抽象校验引擎服务，支持动态配置</li></ul> <h2 id="反模式">反模式</h2> <ol><li>过度校验：在 DAO 层重复校验已经存在的规则</li> <li>校验遗漏：仅仅依赖前端校验或者第三方的调用校验</li> <li>错误抽象：将领域相关的相关校验放入通用模块</li> <li>异常滥用：校验异常不抛出，而是返回错误码</li></ol> <h2 id="总结">总结</h2> <p>数据验证应采用分层防御架构，在保持领域内聚性的前提下，对于高频通用校验逻辑建议抽象为独立模块。关键是要建立清晰的《校验契约文档》，明确定义各层的校验职责边界，同时通过自动化测试 (契约测试、属性测试) 确保校验逻辑的一致性。对于日均百万级以上的系统，建议将核心校验逻辑下</p> <h1 id="解释">解释</h1> <h2 id="controller-service-repository-和-api-gateway-domain-dao-之间的区别">controller -  service - repository 和 API Gateway - domain - dao 之间的区别</h2> <p>controller - service - repository
这是一种经典的三层架构模式，在很多基于 MVC (Model - View - Controller) 思想的 Web 应用中广泛使用。</p> <ul><li><p>Controller (控制器层)
职责：负责接收客户端的请求，对请求进行参数解析、验证，调用相应的 Service 层方法处理业务逻辑，最后将处理结果返回给客户端。通常与 HTTP 请求和响应直接交互，处理请求的路由、请求方法 (如 GET、POST 等)。</p></li> <li><p>Service (服务层)
职责：处理业务逻辑，协调多个 Repository 层的数据访问操作，实现业务规则和事务管理。它是业务逻辑的核心，不直接与客户端或数据库交互，而是专注于业务流程的处理</p></li> <li><p>Repository (数据访问层)
职责：负责与数据库进行交互，执行数据的增删改查操作。通常使用 ORM (对象关系映射) 框架 (如 Hibernate、MyBatis 等) 来实现，将对象映射到数据库表。</p></li></ul> <p>API Gateway - domain - dao
这是一种更偏向于微服务架构的分层模式，强调服务的边界和领域驱动设计 (DDD) 的思想。</p> <ul><li><p>API Gateway (API 网关)
职责：作为系统的统一入口，接收客户端的所有请求，进行请求的路由、负载均衡、身份验证、限流、熔断等操作。它将客户端的请求转发到相应的后端服务，并将后端服务的响应返回给客户端。API 网关可以隐藏后端服务的复杂性，提供统一的 API 接口给客户端。</p></li> <li><p>Domain (领域层)
职责：包含业务领域的核心概念、业务逻辑和规则，是业务的核心抽象。领域层定义了领域模型 (如实体、值对象、聚合根等) 和领域服务，专注于业务问题的解决，不依赖于具体的技术实现。</p></li> <li><p>DAO (数据访问对象)
职责：与 Repository 类似，负责与数据库进行交互，执行数据的持久化操作。但在 DDD 中，DAO 更强调对领域对象的持久化，而不是简单的数据库操作。</p></li></ul> <p>总结：</p> <p>controller - service - repository：侧重于传统的 Web 应用分层，通过 Controller 处理 HTTP 请求，Service 处理业务逻辑，Repository 进行数据访问。</p> <p>API Gateway - domain - dao：更适合微服务架构，API 网关作为统一入口，Domain 层专注于业务领域的核心逻辑，DAO 层负责数据持久化。</p> <h3 id="对比两种架构的差异性">对比两种架构的差异性</h3> <p><em><strong>相似之处</strong></em></p> <ol><li>分层架构思想</li></ol> <p>两种架构都采用了分层设计理念，将不同功能模块分离，以提高代码的可维护性、可扩展性和可测试性。分层可以让每个层次专注于特定的职责，降低模块间的耦合度。</p> <ol start="2"><li>持久层功能</li></ol> <p>在这两种架构中，repository 和 dao 都属于持久层，它们的主要职责都是负责与数据库或其他数据存储系统进行交互，实现数据的持久化操作，如数据的增删改查等。</p> <ol start="3"><li>业务逻辑处理层</li></ol> <p>service 层和 domain 层都承担着业务逻辑处理的核心任务。它们会调用持久层的接口来获取或保存数据，并根据业务规则对数据进行处理，实现特定的业务流程。</p> <ol start="4"><li>与外部交互层</li></ol> <p>controller 和 API Gateway 都处于架构的最上层，负责与外部进行交互。controller 主要接收客户端的 HTTP 请求，处理请求参数并调用相应的业务逻辑，最后返回响应结果给客户端；API Gateway 作为系统的统一入口，接收客户端的各种请求，进行请求路由、负载均衡、身份验证等操作，将请求转发到后端的服务，并将后端服务的响应返回给客户端。</p> <p><em><strong>差异</strong></em></p> <ol><li><p>架构侧重点</p> <ul><li><p>controller - service - repository：这种架构更侧重于传统的 Web 应用开发，是一种经典的三层架构模式，适用于中小型的单体应用。它强调将 Web 应用的不同功能模块进行分离，以实现代码的清晰组织和易于维护。</p></li> <li><p>API Gateway - domain - dao：该架构更偏向于微服务架构和领域驱动设计 (DDD)。它将业务拆分成多个独立的领域服务，强调服务的边界和业务领域的核心概念。API Gateway 的引入使得系统能够更好地管理和保护后端服务，适用于大型的分布式系统和复杂的业务场景。</p></li></ul></li> <li><p>与外部交互方式</p> <ul><li><p>controller：主要处理来自客户端的 HTTP 请求，通常与具体的业务接口紧密相关，一个 controller 可能对应一个或多个业务接口，直接返回业务数据给客户端。</p></li> <li><p>API Gateway：作为系统的统一入口，不仅处理请求的路由和转发，还承担了一些全局的功能，如身份验证、限流、熔断等。它可以隐藏后端服务的复杂性，为客户端提供统一的 API 接口，并且可以对多个后端服务进行聚合和编排。</p></li></ul></li> <li><p>业务逻辑抽象程度</p> <ul><li>service 层：业务逻辑的实现相对较为具体，更关注于业务流程的实现和数据的处理，通常会调用多个 repository 层的方法来完成一个业务操作。</li> <li>domain 层：业务逻辑的抽象程度更高，它基于领域模型来设计，包含了业务领域的核心概念和规则。domain 层更注重业务的本质和内在逻辑，与具体的技术实现解耦，使得业务逻辑更加独立和可复用。<strong>domain 层有具体业务逻辑且与技术实现解耦，DAO 层、API Gateway 层以及基础设施层共同承载了系统中各种具体的技术实现。(domin 都是抽象逻辑，它不管具体的技术实现)</strong></li></ul></li> <li><p>适用场景</p> <ul><li>controller - service - repository：适合简单的 Web 应用、内部管理系统等对业务复杂度和扩展性要求不高的场景。</li></ul></li></ol> <ul><li>API Gateway - domain - dao：适用于需要处理高并发、高可用和复杂业务逻辑的大型分布式系统，如电商平台、社交网络等。</li></ul> <h2 id="mvc-架构也不非要出现-html-这种前端的东西出现在-controller-中">mvc 架构也不非要出现 HTML 这种前端的东西出现在 controller 中</h2> <p>MVC 架构将应用程序划分为三个主要部分：</p> <ul><li>Model (模型)：负责处理数据和业务逻辑，比如数据库操作、数据计算等。</li> <li>View (视图)：负责展示数据，是用户直接看到的界面，在传统 Web 应用中可能是 HTML 页面，在移动应用中可能是原生的 UI 界面。</li> <li>Controller (控制器)：接收用户的请求，调用 Model 进行相应的业务处理，然后根据处理结果选择合适的 View 进行展示。</li></ul> <p>在早期的 Web 开发中，MVC 架构经常与 HTML 紧密结合。Controller 接收 HTTP 请求，调用 Model 获取数据，然后将数据传递给 HTML 模板 (View) 进行渲染，最终返回给客户端</p> <p>随着 Web 技术的发展，前后端分离的开发模式越来越流行。在这种模式下，Controller 不再负责渲染 HTML 页面，而是作为 API 接口的提供者，返回 JSON 或 XML 等数据格式给前端</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/shgopher/luban/edit/release/系统设计基础/架构安全性/架构安全性/验证/README.md" target="_blank" rel="noopener noreferrer">在GitHub中编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">最后更新:</span> <span class="time">2/19/2025, 3:51:20 AM</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/luban/assets/js/app.564f1dfb.js" defer></script><script src="/luban/assets/js/2.1ab40292.js" defer></script><script src="/luban/assets/js/100.2ed1eb2a.js" defer></script>
  </body>
</html>
