# 系统设计理论基础
设计系统的工程师叫做架构师，就如同几千年之前的鲁班一样，设计出了精妙绝伦的系统。

架构不是一成不变的，从最早的单体服务，到如今的分布式服务，微服务，云原生，这要求架构师要不断的学习，变化是最重要的设计考虑因素。

世界上不存在银弹，或许你钟爱某一种形式的设计，但是技术不分好坏，我们总是在寻求利弊而已，我们架构师要做的不过是取舍。一切皆是权衡。

## 技术广度和深度
架构师需要掌握的技能，从技术角度分为技术广度和深度。通常来说，**对于架构师，广度的重要性大于深度**，没有广度就无法纵观全局。

架构师不可能在所有领域都保持一定的深度，这不现实，人不会有这么多的空余时间，我的建议是，**在某个领域保持绝对的技术深度的同时，提高自己的技术广度**，就好比，你是局长兼某科科长，在你的科你的技术是绝对的一流，但你还是局长，必须要了解其它科的技术，才能真正的掌握全局。

## 权衡利弊
微服务一定比单体服务优秀吗？异步通信就是比同步通信好吗？

这个世界是现实的，任何的好处都是有代价的，微服务在可扩展性，高可用性等特征上的确比单体服务优秀，但是它要比单体服务性能更差，复杂度也高很多，花费也要高很多，当我们面向一个场景简单，用户量低的场景下，毫无疑问，选择单体服务是更好的选择。

架构选择没有对错，只有取舍和适合。
## 模块化
模块化的概念是什么？

我给出一个定义，构建更复杂结构中的一组标准化零件，一个复杂结构中的独立单元。一个函数就是整个代码集群中的一个模块，一个数据库组件就是数据库集群中的一个模块。

我们使用三个标准去评估模块之间的关系：
- 內聚性
- 耦合
- 共生性

**內聚性**：

也称之为内聚力，高内聚的模块指的是：功能单一，独立性强，逻辑清晰，如果分割该模块将得到更坏的结果

**耦合**：

耦合度，指的是模块间的依赖关系，高耦合的模块指的是：模块间的依赖关系过多，模块间的修改会相互影响，如果分割该模块将得到更坏的结果

**共生**：

模块间的依赖关系，如果一个组件的变更需要修改另一个组件才能保证系统整体的运行，那么他们之间是共生关系

一个合理的共生关系通常是合理的。通常来说，弱共生关系更合理

### 高内聚低耦合的好处

**高内聚的好处**

提高软件质量：

- 功能明确：每个模块专注于特定的任务，使得代码逻辑更加清晰，易于理解和维护。开发人员可以快速定位问题所在，减少错误的发生。
- 可靠性高：由于模块内部的紧密协作，其功能实现更加稳定可靠。一个高内聚的模块通常经过良好的设计和测试，能够在各种情况下正确执行其特定任务。

增强可维护性：

- 易于修改：当需要对软件进行修改时，高内聚的模块可以独立进行修改，而不会对其他模块产生过多的影响。这大大降低了维护成本和风险，提高了维护效率。
- 可扩展性强：可以方便地在不影响其他模块的情况下，为高内聚的模块添加新的功能或改进现有功能。这种可扩展性使得软件能够适应不断变化的需求。

提升开发效率：

- 分工明确：开发人员可以根据模块的功能进行分工合作，提高开发效率。每个开发人员专注于特定的模块，能够更好地理解和实现其功能，减少开发过程中的冲突和重复工作。
可重用性高：高内聚的模块通常具有较高的可重用性，可以在不同的项目或系统中重复使用。这不仅节省了开发时间，还提高了代码的质量和一致性。

**低耦合的好处**

提高软件的灵活性：
- 易于替换：当需要更换某个模块时，低耦合的设计使得可以轻松地替换该模块，而不会对其他模块产生重大影响。这为软件的升级和改进提供了更大的灵活性。
- 适应变化：低耦合的软件能够更好地适应需求的变化。当需求发生变化时，可以只对受影响的模块进行修改，而不会波及整个系统。

增强软件的可维护性：

- 独立测试：低耦合的模块可以独立进行测试，这使得测试更加容易和高效。可以针对每个模块编写独立的测试用例，确保其功能的正确性，而不需要考虑其他模块的影响。
降低维护成本：由于模块之间的依赖关系较少，维护一个低耦合的软件系统相对容易。当出现问题时，可以快速定位问题所在的模块，并进行修复，而不会影响到其他模块。
提高软件的可扩展性：
- 方便添加新功能：低耦合的设计使得可以方便地添加新的模块或功能，而不会对现有系统造成太大的影响。新的模块可以独立开发和测试，然后与现有系统进行集成。
- 支持分布式开发：低耦合的软件更适合分布式开发，不同的开发团队可以独立开发不同的模块，然后进行集成。这种开发方式可以提高开发效率，降低开发风险。

## 架构特征







