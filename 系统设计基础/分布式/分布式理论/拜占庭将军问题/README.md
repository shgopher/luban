# 拜占庭将军问题
拜占庭将军将军问题讨论的核心内容是**分布式共识问题**

## 拜占庭将军问题算法和非拜占庭将军问题算法
***非***拜占庭拜占庭将军问题算法：
- Paxos (强一致性的主备方案)
- Raft (强一致性的主备方案)
- ZAB (强一致性的主备方案)
- Gossip (最终一致性的无主方案)

**拜占庭将军问题算法：**
- PBFT (强一致性的主备方案)
- Pow (最终一致性方案)
## 常见的共识算法架构
在分布式系统中，常见的共识方案可以分为以下两大类：

**主备方案 (Leader-Follower 模式)**

这是最常见的一种形式，如 Raft、ZAB 等算法采用此模式
- Leader 负责处理所有的写请求
- Follower 节点可以提供读服务，并作为备份节点

集群通过共识算法来保证主节点和备份节点之间的数据一致性

**多主方案**

Multi-Paxos 变体：支持多个主节点，每个主负责不同的值域范围

典型例子：
  - MySQL 分片集群
  - MongoDB 分片集群
  - Redis 集群

**无主方案**

CRDT (无主)：所有节点都可以处理写入；通过数学特性保证最终一致性；适用于协同编辑等场景。


- Gossip 协议：
  - 去中心化设计
  - 通过节点间随机通信传播更新
  - 用于服务发现等场景

- Pow 协议：
  - 支持对等节点设计
  - 可处理恶意节点
  -常用于区块链系统

方案选择考虑因素：

主备方案优势：

- 实现相对简单
- 一致性保证强
- 业务逻辑清晰


多主/无主方案优势：

- 更好的写入性能
- 更高的可用性
- 避免单点故障


多主/无主方案劣势：

- 一致性保证相对较弱
- 实现复杂度高
- 需要解决冲突

实际选择时需要根据业务场景在 CAP 三者间做出权衡，选择最适合的方案。

## 多主和无主的区别
如果所有节点都是对等的，都可以处理写请求，这种是无主 (Leaderless) 架构，而不是多主。典型的就是 Gossip 协议，和

也就是说，多主，并不是所有节点完全平等，有多个主节点，每个主节点下都可能有自己的备份节点，主节点之间是对等的，都可以处理写请求，**每个主节点通常负责不同的数据范围**

**多主就等于多个主从，然后使用一致性哈希等算法，划片儿治理的意思**




